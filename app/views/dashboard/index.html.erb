<div class="min-h-screen bg-gray-50 py-4 sm:py-8">
  <div class="max-w-4xl mx-auto px-4">
    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-6 sm:mb-8">Dashboard</h1>
    
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8">
      <div class="bg-white p-4 sm:p-6 rounded-lg shadow">
        <h3 class="text-sm sm:text-lg font-semibold text-gray-700">Attempted</h3>
        <p class="text-xl sm:text-3xl font-bold text-blue-600"><%= @stats[:attempted] %></p>
      </div>
      <div class="bg-white p-4 sm:p-6 rounded-lg shadow">
        <h3 class="text-sm sm:text-lg font-semibold text-gray-700">Correct</h3>
        <p class="text-xl sm:text-3xl font-bold text-green-600"><%= @stats[:correct] %></p>
      </div>
      <div class="bg-white p-4 sm:p-6 rounded-lg shadow">
        <h3 class="text-sm sm:text-lg font-semibold text-gray-700">Incorrect</h3>
        <p class="text-xl sm:text-3xl font-bold text-red-600"><%= @stats[:incorrect] %></p>
      </div>
      <div class="bg-white p-4 sm:p-6 rounded-lg shadow">
        <h3 class="text-sm sm:text-lg font-semibold text-gray-700">Success Rate</h3>
        <p class="text-xl sm:text-3xl font-bold text-purple-600"><%= @stats[:success_percentage] %>%</p>
      </div>
    </div>
    
    <div class="bg-white p-4 sm:p-6 rounded-lg shadow mb-6 sm:mb-8">
      <h3 class="text-lg font-semibold text-gray-700 mb-4">7-Day Performance</h3>
      <div class="h-48 sm:h-64">
        <canvas id="performanceChart" class="w-full h-full"></canvas>
      </div>
    </div>
    
    <div class="text-center">
      <%= link_to "Start Answering Questions", question_path, class: "inline-block bg-blue-600 text-white px-6 sm:px-8 py-3 rounded-lg text-base sm:text-lg font-semibold hover:bg-blue-700 w-full sm:w-auto" %>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('performanceChart').getContext('2d');
const chartData = <%= raw current_user.daily_stats.to_json %>;

new Chart(ctx, {
  type: 'line',
  data: {
    labels: chartData.map(d => d.date),
    datasets: [{
      label: 'Success Rate (%)',
      data: chartData.map(d => d.success_rate),
      borderColor: 'rgb(59, 130, 246)',
      backgroundColor: 'rgba(59, 130, 246, 0.1)',
      tension: 0.4
    }, {
      label: 'Questions Attempted',
      data: chartData.map(d => d.attempted),
      borderColor: 'rgb(16, 185, 129)',
      backgroundColor: 'rgba(16, 185, 129, 0.1)',
      yAxisID: 'y1',
      tension: 0.4
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    animation: {
      duration: 2000,
      easing: 'easeInOutQuart'
    },
    scales: {
      y: {
        beginAtZero: true,
        max: 100,
        title: { display: true, text: 'Success Rate (%)' }
      },
      y1: {
        type: 'linear',
        display: true,
        position: 'right',
        beginAtZero: true,
        title: { display: true, text: 'Questions Attempted' }
      }
    }
  }
});
</script>
